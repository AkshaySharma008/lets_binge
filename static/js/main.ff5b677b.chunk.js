(this.webpackJsonplets_watch=this.webpackJsonplets_watch||[]).push([[0],{20:function(e,t,n){e.exports={body:"chat_body__-cV2Q",input_message:"chat_input_message__3ShjF",message_area:"chat_message_area__35dwc",bubble:"chat_bubble__GOTsH",username:"chat_username__3goGx",message:"chat_message__1rLmk"}},25:function(e,t,n){e.exports={room_container:"room_room_container__yoafx",wrapper:"room_wrapper__1-jBj",wave:"room_wave__qW0_q",details:"room_details__3Vg9j"}},29:function(e,t,n){e.exports={shadow:"page_loader_shadow__3rt0p",title:"page_loader_title__2Udzc"}},32:function(e,t,n){e.exports={player:"player_player__7Avdx",react_player:"player_react_player__iHCin"}},46:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(37),o=n.n(c),s=(n(46),n(17)),u=n(6),i=n(5),l=n.n(i),p=n(12),f=n(26),E=(n(82),n(49),{ALLOWED_DOMAINS:["music.youtube.com","youtube.com"],CONVERT_DOMAINS:{"music.youtube.com":"youtube.com"},DEFAULT_SRC:"https://www.youtube.com/watch?v=7bv_eqtkKqQ",FIREBASE:{API_KEY:"AIzaSyCMrTjeCVqbWIUDuXSzrQCCWOO1UuNbJBM",AUTH_DOMAIN:"orbital-scene-200115.firebaseapp.com",PROJECT_ID:"orbital-scene-200115",STORAGE_BUCKET:"orbital-scene-200115.appspot.com",MESSAGING_SENDER_ID:"184642334250",APP_ID:"1:184642334250:web:bc19551df971fb77b25d53",MEASUREMENT_ID:"G-WG9CW377SK"},USERNAME_KEY:"username",EVENT:{ADD:{KEYWORD:"add",MESSAGE:["Say Hi to ${user}","${user} is here!","Look ${user} is here"]},REMOVE:{KEYWORD:"remove",MESSAGE:["${user} left"]},MESSAGE:{KEYWORD:"message"},LOAD:{KEYWORD:"load",MESSAGE:["${user} has loaded another video"]},PLAYER:{PLAY:{KEYWORD:"play",MESSAGE:["${user} started playing!"]},PAUSE:{KEYWORD:"pause",MESSAGE:["${user} paused the video!"]}}}}),d=E.FIREBASE,b="rooms",m="members",O=function(){f.a.initializeApp({apiKey:d.API_KEY,authDomain:d.AUTH_DOMAIN,projectId:d.PROJECT_ID,storageBucket:d.STORAGE_BUCKET,messagingSenderId:d.MESSAGING_SENDER_ID,appId:d.APP_ID,measurementId:d.MEASUREMENT_ID})},j=function(){return 0===f.a.apps.length&&O(),f.a.firestore()},v={initializeFirebase:O,createRoom:function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j(),e.next=3,t.collection(b).add({name:"Tokyo",country:"Japan"});case 3:return n=e.sent,e.abrupt("return",n.id);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createMember:function(){var e=Object(p.a)(l.a.mark((function e(t,n,r){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j(),e.next=3,a.collection(b).doc(t).collection(m).add({name:n,isHost:r});case 3:return c=e.sent,e.abrupt("return",c.id);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),rooms:function(){return j().collection("rooms")},createEvent:function(){var e=Object(p.a)(l.a.mark((function e(t,n,r,a){var c,o,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=j(),o=new Date,s=o.getTime(),e.next=5,c.collection(b).doc(t).collection("events").add({type:n,user:r,message:a,createdAt:s});case 5:return u=e.sent,e.abrupt("return",u.id);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),events:function(e){return j().collection("rooms").doc(e).collection("events").orderBy("createdAt")},members:function(e){return j().collection("rooms").doc(e).collection("members")},getLastEvents:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j(),r=n.collection("rooms").doc(t).collection("events"),e.next=4,r.limit(25).get();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMembers:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j(),r=n.collection(b).doc(t).collection(m),e.next=4,r.get();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),findMember:function(){var e=Object(p.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j(),e.next=3,r.collection(b).doc(n).collection(m).where("id","==",t).get();case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateRoomDetails:function(e,t,n){j().collection(b).doc(e).update({url:t,progress:n})},getARoom:function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j(),r=n.collection(b).doc(t),e.next=4,r.get();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=n(29),g=n.n(h),_=n(39),S=n.n(_),x=n(2);var A=function(e){var t=e.title,n=e.cover,r={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), \n        url(".concat(n,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"};return Object(x.jsxs)("div",{className:g.a.shadow,style:r,children:[Object(x.jsx)("div",{className:g.a.title,children:t}),Object(x.jsx)(S.a,{loading:!0,css:"\n    position:fixed;\n    left: 45%;\n    top: 50%;\n",size:100,color:"white"})]})},D=function(){var e=Object(u.g)(),t=Object(r.useState)(!1),n=Object(s.a)(t,2),a=n[0],c=n[1];return Object(x.jsxs)("div",{children:[a&&Object(x.jsx)(A,{title:"Creating Room"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){c(!0),v.createRoom().then((function(t){!function(t){t&&e.push({pathname:"/room/".concat(t)})}(t)})).catch((function(e){c(!1)}))},children:"Create Room"})})]})},R=n(41),y=n.n(R),w=n(32),N=n.n(w);var M=function(e){var t=e.src,n=e.createEvent,a=e.playing,c=e.updateRoomProgress,o=e.seek,s=Object(r.useRef)(),u=E.EVENT.PLAYER;return Object(r.useEffect)((function(){return function(){}})),Object(r.useEffect)((function(){o&&s.current.seekTo(o,"fraction")}),[o]),Object(x.jsx)("div",{className:N.a.player,children:Object(x.jsx)(y.a,{url:t,ref:s,playing:a,className:N.a.react_player,width:"100%",height:"100%",config:{youtube:{playerVars:{showinfo:0,autoplay:0}},facebook:{appId:"12345"}},controls:!0,onPause:function(){!0===a&&n(u.PAUSE.KEYWORD)},onBuffer:function(){console.log("Bufferringgg!!")},onSeek:function(){console.log("Seekingg")},onPlay:function(){!1===a&&n(u.PLAY.KEYWORD)},onProgress:function(e){c(e.played)}})})},C=n(20),k=n.n(C);var T=function(e){var t=e.messages,n=e.addMessage,a=Object(r.useRef)();Object(r.useEffect)((function(){return function(){}})),Object(r.useEffect)((function(){a.current.scrollIntoView()}),[t]);var c=function(){var e=document.getElementById("msg"),t=e.value;t&&(n(t),e.value="")};return Object(x.jsxs)("div",{className:k.a.body,children:[Object(x.jsxs)("div",{className:k.a.message_area,children:[t&&t.map((function(e){return Object(x.jsxs)("div",{className:k.a.bubble,children:[e.username&&Object(x.jsxs)("div",{className:k.a.username,children:[e.username,":"]}),Object(x.jsx)("div",{className:k.a.message,children:e.message})]})})),Object(x.jsx)("span",{ref:a})]}),Object(x.jsxs)("div",{className:k.a.input_message,children:[Object(x.jsx)("input",{onKeyPress:function(e){13===e.which&&c()},type:"text",id:"msg",placeholder:"Say Hi!"}),Object(x.jsx)("button",{onClick:c,children:"SEND"})]})]})},L=n(25),I=n.n(L),P=n(21),Y=function(e,t){"object"===typeof t&&null!==t?P.reactLocalStorage.setObject(e,t):P.reactLocalStorage.set(e,t)},K=function(e){if(e){var t=P.reactLocalStorage.getObject(e);return"object"===typeof t&&0!==Object.keys(t).length?t:P.reactLocalStorage.get(e)}return null},V=new Map;var W=function(){var e=Object(r.useState)(E.DEFAULT_SRC),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("USER"),o=Object(s.a)(c,2),i=(o[0],o[1]),f=Object(r.useState)(!1),d=Object(s.a)(f,2),b=d[0],m=d[1],O=Object(r.useState)(0),j=Object(s.a)(O,2),h=j[0],g=j[1],_=Object(r.useState)([]),S=Object(s.a)(_,2),A=S[0],D=S[1],R=Object(u.h)().id,y=Object(r.useState)(null),w=Object(s.a)(y,2),N=w[0],C=w[1],k=function(e){var t=function(e){for(var t="",n=0;n<E.ALLOWED_DOMAINS.length;n++){var r=E.ALLOWED_DOMAINS[n];if(e.includes(r)){t=r;break}}if(""===t)return-1;var a=t;return E.CONVERT_DOMAINS[t]&&(a=E.CONVERT_DOMAINS[t]),[t,a]}(e=e.trim());return Array.isArray(t)?e.replace(t[0],t[1]):e},L=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getMembers(R);case 2:e.sent.forEach((function(e){V.set(e.id,e.data())}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=K(R))||!n.member){e.next=6;break}N=n.member,C(N),e.next=14;break;case 6:return r=0===V.size,e.next=9,v.createMember(R,t,r);case 9:N=e.sent,C(N),Y(R,{member:N}),V.set(N,{name:t,isHost:r});case 14:v.createEvent(R,E.EVENT.ADD.KEYWORD,N,"");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=null===(n=V.get(t))||void 0===n?void 0:n.name)){e.next=7;break}return e.next=4,v.findMember(t);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=r;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getARoom(R);case 2:(t=e.sent)&&((n=t.data()).url&&a(n.url),n.progress&&g(n.progress));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e,t){var n=e.length;return e[Math.floor(Math.random()*n)].replace("${user}",t)},B=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,e.next=3,W(n);case 3:r=e.sent,e.t0=t.type,e.next=e.t0===E.EVENT.ADD.KEYWORD?7:e.t0===E.EVENT.REMOVE.KEYWORD?9:e.t0===E.EVENT.LOAD.KEYWORD?11:e.t0===E.EVENT.MESSAGE.KEYWORD?14:e.t0===E.EVENT.PLAYER.PLAY.KEYWORD?16:e.t0===E.EVENT.PLAYER.PAUSE.KEYWORD?19:21;break;case 7:return e.abrupt("return",{message:U(E.EVENT.ADD.MESSAGE,r)});case 9:return e.abrupt("return",{message:U(E.EVENT.REMOVE.MESSAGE,r)});case 11:return a(t.message),e.abrupt("return",{message:U(E.EVENT.LOAD.MESSAGE,r)});case 14:return e.abrupt("return",{message:t.message,username:r});case 16:return m(!0),e.abrupt("return",{message:U(E.EVENT.PLAYER.PLAY.MESSAGE,r)});case 19:return m(!1),e.abrupt("return",{message:U(E.EVENT.PLAYER.PAUSE.MESSAGE,r)});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){G();var e=function(){var e=E.USERNAME_KEY,t=K(e);return t||(t=prompt("Enter Username"),Y(e,t),t)}();return i(e),L().then((function(t){P(e).then((function(e){v.events(R).onSnapshot((function(e){var t=[];e.docChanges().forEach((function(e){t.push(new Promise((function(t,n){var r;null===(r=B(e.doc.data()))||void 0===r||r.then((function(e){t(e)})).catch((function(e){n(e)}))})))})),Promise.all(t).then((function(e){A=A.concat(e),D(A)}))}))}))})),function(){v.createEvent(R,E.EVENT.REMOVE.KEYWORD,N,"")}}),[]),Object(x.jsxs)("div",{className:I.a.room_container,children:[Object(x.jsxs)("div",{className:I.a.wrapper,children:[Object(x.jsx)(M,{className:"player",src:n,createEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";v.createEvent(R,e,N,t)},playing:b,updateRoomProgress:function(e){var t;(null===V||void 0===V||null===(t=V.get(N))||void 0===t?void 0:t.isHost)&&v.updateRoomDetails(R,n,e)},seek:h}),Object(x.jsx)(T,{className:"chat",messages:A,addMessage:function(e){v.createEvent(R,E.EVENT.MESSAGE.KEYWORD,N,e)}})]}),Object(x.jsxs)("div",{className:I.a.details,children:[Object(x.jsx)("input",{type:"text",id:"link",placeholder:" DROP YOUR LINK HERE"}),Object(x.jsx)("button",{onClick:function(){var e=document.getElementById("link").value,t=k(e);a(t),v.createEvent(R,E.EVENT.LOAD.KEYWORD,N,t)},children:"LOAD"})]}),Object(x.jsx)("div",{className:I.a.wave,children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:Object(x.jsx)("path",{fill:"#641ba8cc",fillP:"1",d:"M0,128L24,133.3C48,139,96,149,144,144C192,139,240,117,288,128C336,139,384,181,432,186.7C480,192,528,160,576,170.7C624,181,672,235,720,256C768,277,816,267,864,272C912,277,960,299,1008,266.7C1056,235,1104,149,1152,112C1200,75,1248,85,1296,101.3C1344,117,1392,139,1416,149.3L1440,160L1440,320L1416,320C1392,320,1344,320,1296,320C1248,320,1200,320,1152,320C1104,320,1056,320,1008,320C960,320,912,320,864,320C816,320,768,320,720,320C672,320,624,320,576,320C528,320,480,320,432,320C384,320,336,320,288,320C240,320,192,320,144,320C96,320,48,320,24,320L0,320Z"})})})]})},G=n(24);var U=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(G.a,{children:Object(x.jsxs)(u.d,{children:[Object(x.jsx)(u.b,{path:"/",component:D}),Object(x.jsx)(u.b,{path:"/room/:id",component:W}),Object(x.jsx)(u.a,{to:"/"})]})})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,83)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(U,{})}),document.getElementById("root")),B()}},[[81,1,2]]]);
//# sourceMappingURL=main.ff5b677b.chunk.js.map